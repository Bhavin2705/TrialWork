<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Social</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" />
    <link rel="icon" type="image/png" href="/images/icon.png" />
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    animation: {
                        'fade-in': 'fadeIn 0.3s ease-out',
                        'slide-in': 'slideIn 0.3s ease-out'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' }
                        },
                        slideIn: {
                            '0%': { transform: 'translateX(-100%)' },
                            '100%': { transform: 'translateX(0)' }
                        }
                    }
                }
            }
        }
    </script>
</head>

<style>
    #modal {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 2000;
        /* Increased z-index */
        background-color: rgba(0, 0, 0, 0.5);
        /* Semi-transparent background */
        width: 80%;
        max-width: 500px;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        display: none;
        /* Hidden by default */
    }

    html {
        overflow-x: hidden;
    }

    #main-section {
        margin-top: 3rem;
        margin-left: 25%;
    }

    /* .nav-link {
        position: relative;
        color: #333;
        font-size: 1rem;
        font-weight: 500;
        transition: color 0.3s ease, transform 0.3s ease;
    }

    .nav-link:hover {
        color: #1d4ed8;
        transform: scale(1.1);
    }

    .nav-link:before {
        content: '';
        position: absolute;
        bottom: -2px;
        left: 0;
        width: 0;
        height: 2px;
        background-color: #1d4ed8;
        transition: width 0.3s ease;
    }

    .nav-link:hover:before {
        width: 100%;
    }

    /* Navbar styling */
    .navbar {
        background-color: #fff;
        padding: 0.75rem 2rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .navbar-brand {
        font-size: 1.75rem;
        font-weight: bold;
        color: #333;
        text-transform: uppercase;
    }

    */

    /* Profile Dropdown */
    .profile-container {
        position: relative;
    }

    .profile-dropdown {
        position: absolute;
        right: 0;
        top: 100%;
        background-color: #fff;
        width: 180px;
        padding: 10px 0;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        opacity: 0;
        visibility: hidden;
        transform: translateY(10px);
        transition: all 0.3s ease;
    }

    .profile-container:hover .profile-dropdown {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
    }

    .profile-dropdown a {
        padding: 12px;
        display: block;
        color: #333;
        font-size: 1rem;
        text-decoration: none;
        transition: background-color 0.3s ease;
    }

    .profile-dropdown a:hover {
        background-color: #f1f1f1;
    }

    /* Hamburger Menu */
    .menu-btn {
        display: flex;
        flex-direction: column;
        justify-content: space-around;
        width: 24px;
        height: 24px;
        border: none;
        background: transparent;
        cursor: pointer;
        padding: 0;
        z-index: 10;
    }

    .menu-btn div {
        width: 24px;
        height: 3px;
        background: #333;
        border-radius: 10px;
        transition: all 0.3s linear;
    }

    .menu-btn.open div:nth-child(1) {
        transform: rotate(45deg);
    }

    .menu-btn.open div:nth-child(2) {
        opacity: 0;
        transform: translateX(20px);
    }

    .menu-btn.open div:nth-child(3) {
        transform: rotate(-45deg);
    }

    /* Mobile Menu */
    .mobile-menu {
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        background: rgba(0, 0, 0, 0.7);
        transform: translateX(100%);
        transition: transform 0.3s ease;
        z-index: 20;
    }

    .mobile-menu.open {
        transform: translateX(0);
    }

    .mobile-menu ul {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100%;
    }

    .mobile-menu ul li {
        margin: 15px 0;
    }

    .mobile-menu a {
        font-size: 1.25rem;
        color: #fff;
        text-decoration: none;
        text-transform: uppercase;
        font-weight: bold;
        transition: color 0.3s ease;
    }

    .mobile-menu a:hover {
        color: #1d4ed8;
    }

    /* Custom Scrollbar for Stories Section */
    .stories-container::-webkit-scrollbar {
        width: 6px;
    }

    .stories-container::-webkit-scrollbar-thumb {
        background: #1d4ed8;
        border-radius: 10px;
    }

    .fade-out {
        animation: fadeOutUp 0.5s forwards;
    }

    @keyframes fadeOutUp {
        0% {
            opacity: 1;
            transform: translateY(0);
        }

        100% {
            opacity: 0;
            transform: translateY(-20px);
        }
    }

    #right-section {
        max-height: 1000px;
        overflow-y: auto;
        width: 28%;
        margin-right: -50px;
    }

    /* Custom CSS to fix button spacing issue */
    #right-section .action-buttons {
        display: flex;
        gap: 0px;
        /* Adjust gap as necessary */
    }

    #right-section .friend-request {
        display: flex;
        justify-content: space-between;
        align-items: center;
        overflow: hidden;
    }

    #right-section .friend-request .action-buttons {
        flex-shrink: 0;
        /* Prevents buttons from shrinking */
    }

    #right-section .friend-request .flex-grow {
        flex-grow: 1;
        /* Allows name to take up available space */
    }

    #right-section .friend-request p {
        display: -webkit-box;
        -webkit-box-orient: vertical;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: normal;
        /* Allow wrapping */
    }

    /* #middle-section {
        width: 46%;
    } */

    #left-section {
        width: 17%;
        /* Width of the left section */
        position: fixed;
        top: 4rem;
        left: 0;
        height: calc(100vh - 4rem);
        overflow-y: auto;
        z-index: 10;
        background-color: white;
        box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
        padding: 1rem;
    }

    #right-section {
        position: fixed;
        top: 4rem;
        right: 0;
        width: 29%;
        /* Width of the right section */
        height: calc(100vh - 4rem);
        overflow-y: auto;
        background-color: white;
        z-index: 10;
        box-shadow: -2px 0 5px rgba(0, 0, 0, 0.1);
        padding: 1rem;
    }

    #middle-section {
        position: absolute;
        top: 4rem;
        left: 20%;
        /* Starts after the left section */
        right: 25%;
        /* Leaves space for the right section */
        padding: 1rem;
        background-color: #f9f9f9;
        min-height: calc(100vh - 4rem);
    }

    .max-w-7xl {
        padding-left: -4px;
    }

    #searchInput {
        width: 90%;
        /* Decrease width by adjusting this percentage */
    }
</style>

<body class="bg-gray-50">
    <header class="fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-md border-b border-gray-200">
        <div class="max-w-full mx-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center space-x-32">
                    <!-- Small space from the left -->
                    <a href="/" class="text-xl font-semibold hover:text-rose-500 transition-colors">SocialNet</a>
                    <nav class="hidden md:flex items-center space-x-4">
                        <a href="/home.html"><button
                                class="inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-md">
                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6">
                                    </path>
                                </svg>
                                Home
                            </button></a>
                        <a href="./explore"><button
                                class="inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-md">
                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                                </svg>
                                Explore
                            </button></a>
                        <a href="/messages"><button
                                class="inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-md mr-48">
                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-4l-4 4-4-4z">
                                    </path>
                                </svg>
                                Messages
                            </button></a>
                    </nav>
                </div>

                <div class="flex-1 max-w-md mx-8 hidden md:block relative">
                    <div class="relative">
                        <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"
                            fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                        <input type="search" id="searchInput" placeholder="Search..."
                            class="w-full pl-10 pr-4 py-2 bg-gray-100 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-rose-500 focus:border-transparent">
                    </div>
                    <!-- Search Results Dropdown -->
                    <div id="searchResults"
                        class="hidden absolute w-full mt-2 bg-white rounded-lg shadow-lg border border-gray-200 max-h-96 overflow-y-auto animate-fade-in">
                        <div class="p-2">
                            <div id="searchResultsContent" class="space-y-2">
                                <!-- Results will be dynamically inserted here -->
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <button id="notificationButton"
                            class="p-2 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-md">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9">
                                </path>
                            </svg>
                            <span id="notificationDot"
                                class="absolute -top-1 -right-1 w-2 h-2 bg-rose-500 rounded-full"></span>
                        </button>

                        <!-- Notifications Dropdown -->
                        <div id="notificationsDropdown"
                            class="hidden absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 animate-fade-in">
                            <div class="p-4">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="font-semibold text-gray-900">Notifications</h3>
                                    <button id="markAllRead" class="text-sm text-rose-500 hover:text-rose-600">Mark all
                                        as read</button>
                                </div>
                                <div class="space-y-4">
                                    <div class="flex items-start space-x-3 p-2 hover:bg-gray-50 rounded-md">
                                        <div class="w-8 h-8 rounded-full bg-gray-200"></div>
                                        <div>
                                            <p class="text-sm text-gray-800"><span class="font-medium">John Doe</span>
                                                liked your post</p>
                                            <p class="text-xs text-gray-500">2 minutes ago</p>
                                        </div>
                                    </div>
                                    <div class="flex items-start space-x-3 p-2 hover:bg-gray-50 rounded-md">
                                        <div class="w-8 h-8 rounded-full bg-gray-200"></div>
                                        <div>
                                            <p class="text-sm text-gray-800"><span class="font-medium">Jane Smith</span>
                                                commented on your photo</p>
                                            <p class="text-xs text-gray-500">1 hour ago</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button id="createPostButton"
                        class="px-4 py-2 bg-rose-500 text-white rounded-md hover:bg-rose-600 focus:outline-none focus:ring-2 focus:ring-rose-500 focus:ring-offset-2">
                        Create Post
                    </button>

                </div>
            </div>
        </div>
    </header>

    <!-- Main content and footer sections -->
    <div id="createPostModal"
        class="hidden fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50">
        <div class="bg-white p-6 rounded-lg max-w-lg w-full relative">
            <!-- Close Button -->
            <button id="closeModalButton" class="absolute top-4 right-4 text-gray-600 hover:text-gray-800">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                    </path>
                </svg>
            </button>
            <h2 class="text-xl font-semibold mb-4">Create a Post</h2>
            <form id="createPostForm" action="#" method="POST" enctype="multipart/form-data">
                <textarea id="postContent" name="postContent" rows="4"
                    class="w-full p-2 border border-gray-300 rounded-md" placeholder="What's on your mind?"></textarea>
                <div class="mt-4">
                    <label for="fileUpload" class="block text-sm font-medium text-gray-700">Upload a File</label>
                    <input type="file" id="fileUpload" name="fileUpload"
                        class="mt-2 w-full text-sm text-gray-700 border border-gray-300 rounded-md">
                </div>
                <div class="mt-4">
                    <label for="linkInput" class="block text-sm font-medium text-gray-700">Add a Link</label>
                    <input type="url" id="linkInput" name="linkInput"
                        class="mt-2 w-full text-sm text-gray-700 border border-gray-300 rounded-md"
                        placeholder="https://example.com">
                </div>
                <div class="mt-4 flex justify-end space-x-4">
                    <button type="button" id="cancelPostButton"
                        class="text-gray-600 hover:text-gray-800">Cancel</button>
                    <button type="submit" id="postButton"
                        class="px-4 py-2 bg-rose-500 text-white rounded-md hover:bg-rose-600">Post</button>
                </div>
            </form>
        </div>
    </div>


    <!-- Mobile Hamburger Menu -->
    <div class="md:hidden">
        <button id="menu-btn" class="menu-btn">
            <div class="w-6 h-1 bg-gray-800 dark:bg-gray-200 mb-1"></div>
            <div class="w-6 h-1 bg-gray-800 dark:bg-gray-200 mb-1"></div>
            <div class="w-6 h-1 bg-gray-800 dark:bg-gray-200"></div>
        </button>
    </div>
    </div>
    </nav>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="mobile-menu hidden bg-gray-100 dark:bg-gray-800 px-6 py-4 md:hidden">
        <ul class="space-y-4">
            <li><a href="#" class="text-gray-700 dark:text-gray-300 hover:text-blue-500">Home</a></li>
            <li><a href="/explore" class="text-gray-700 dark:text-gray-300 hover:text-blue-500">Explore</a></li>
            <li><a href="/messages" class="text-gray-700 dark:text-gray-300 hover:text-blue-500">Messages</a></li>
            <li><button
                    class="btn-primary bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg">Create</button>
            </li>
        </ul>
    </div>

    <!-- Main Section -->
    <main class="container mx-auto py-6 " id="main-section">
        <div class="flex flex-wrap">
            <!-- Left Section -->
            <div class="w-full md:w-1/4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg h-full " id="left-section">
                <!-- Profile & Navigation Section -->
                <div class="mb-8 pb-6 border-b border-gray-200 dark:border-gray-700">
                    <a href="#"
                        class="flex items-center space-x-4 mb-6 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg transition duration-300 transform hover:scale-105">
                        <div class="profile-pic">
                            <img src="https://th.bing.com/th/id/OIP.hIuJO0PIE2kRkLgyTLis5AHaFj?w=234&h=180&c=7&r=0&o=5&pid=1.7"
                                alt="" class="h-12 w-12 rounded-full border-2 border-blue-500" />
                        </div>
                        <div class="handle">
                            <h4 class="text-lg font-bold text-gray-700 dark:text-gray-200">Manish Jain</h4>
                            <p class="text-sm text-gray-500 dark:text-gray-400">@mj</p>
                        </div>
                    </a>

                    <div class="space-y-4">
                        <a href="#"
                            class="flex items-center space-x-2 text-gray-700 dark:text-gray-300 hover:text-blue-500 hover:bg-gray-100 dark:hover:bg-gray-700 p-2 rounded-lg transition duration-300 transform hover:scale-105">
                            <i class="fas fa-home"></i>
                            <h3>Home</h3>
                        </a>
                        <a href="./explore.html"
                            class="flex items-center space-x-2 text-gray-700 dark:text-gray-300 hover:text-blue-500 hover:bg-gray-100 dark:hover:bg-gray-700 p-2 rounded-lg transition duration-300 transform hover:scale-105">
                            <i class="fa-regular fa-compass"></i>
                            <h3>Explore</h3>
                        </a>
                        <a href="#"
                            class="flex items-center space-x-2 text-gray-700 dark:text-gray-300 hover:text-blue-500 hover:bg-gray-100 dark:hover:bg-gray-700 p-2 rounded-lg transition duration-300 transform hover:scale-105">
                            <i class="fas fa-bell"></i>
                            <h3>Notifications</h3>
                        </a>
                        <a href="./messages.html"
                            class="flex items-center space-x-2 text-gray-700 dark:text-gray-300 hover:text-blue-500 hover:bg-gray-100 dark:hover:bg-gray-700 p-2 rounded-lg transition duration-300 transform hover:scale-105">
                            <i class="fas fa-comments"></i>
                            <h3>Messages</h3>
                        </a>
                        <a href="#"
                            class="flex items-center space-x-2 text-gray-700 dark:text-gray-300 hover:text-blue-500 hover:bg-gray-100 dark:hover:bg-gray-700 p-2 rounded-lg transition duration-300 transform hover:scale-105">
                            <i class="fas fa-bookmark"></i>
                            <h3>Bookmarks</h3>
                        </a>
                        <a href="#"
                            class="flex items-center space-x-2 text-gray-700 dark:text-gray-300 hover:text-blue-500 hover:bg-gray-100 dark:hover:bg-gray-700 p-2 rounded-lg transition duration-300 transform hover:scale-105">
                            <i class="fas fa-chart-line"></i>
                            <h3>Analytics</h3>
                        </a>
                    </div>
                </div>

                <!-- Topics Section -->
                <div class="pt-2">
                    <div class="flex items-center space-x-2 text-gray-700 dark:text-gray-300 p-2 mb-4">
                        <h3 class="text-lg font-bold text-gray-700 dark:text-gray-200">Choose Topic</h3>
                    </div>

                    <div class="space-y-4">
                        <a href="#"
                            class="flex items-center space-x-2 text-gray-700 dark:text-gray-300 hover:text-blue-500 hover:bg-gray-100 dark:hover:bg-gray-700 p-2 rounded-lg transition duration-300 transform hover:scale-105"
                            onclick="loadPostsByTopic('technology')">
                            <i class="fas fa-laptop-code"></i>
                            <h3>Technology</h3>
                        </a>
                        <a href="#"
                            class="flex items-center space-x-2 text-gray-700 dark:text-gray-300 hover:text-blue-500 hover:bg-gray-100 dark:hover:bg-gray-700 p-2 rounded-lg transition duration-300 transform hover:scale-105"
                            onclick="loadPostsByTopic('news')">
                            <i class="fas fa-newspaper"></i>
                            <h3>News</h3>
                        </a>
                        <a href="#"
                            class="flex items-center space-x-2 text-gray-700 dark:text-gray-300 hover:text-blue-500 hover:bg-gray-100 dark:hover:bg-gray-700 p-2 rounded-lg transition duration-300 transform hover:scale-105"
                            onclick="loadPostsByTopic('fitness')">
                            <i class="fas fa-dumbbell"></i>
                            <h3>Fitness</h3>
                        </a>
                        <a href="#"
                            class="flex items-center space-x-2 text-gray-700 dark:text-gray-300 hover:text-blue-500 hover:bg-gray-100 dark:hover:bg-gray-700 p-2 rounded-lg transition duration-300 transform hover:scale-105"
                            onclick="loadPostsByTopic('sports')">
                            <i class="fas fa-basketball-ball"></i>
                            <h3>Sports</h3>
                        </a>
                        <a href="#"
                            class="flex items-center space-x-2 text-gray-700 dark:text-gray-300 hover:text-blue-500 hover:bg-gray-100 dark:hover:bg-gray-700 p-2 rounded-lg transition duration-300 transform hover:scale-105"
                            onclick="loadPostsByTopic('movies')">
                            <i class="fas fa-film"></i>
                            <h3>Movies</h3>
                        </a>
                    </div>
                </div>
            </div>


            <div class="w-full md:w-1/2 p-4 overflow-hidden bg-white dark:bg-gray-800" id="middle-section">

                <!-- News Feed with Infinite Scrolling -->
                <div id="post-feed" class="news-feeds space-y-6">
                    <!-- Feed items will be dynamically inserted here -->
                </div>

                <!-- Loading Indicator -->
                <div id="loading-indicator" class="hidden text-center py-4">
                    <span class="text-gray-500">Loading more posts...</span>
                </div>
            </div>


            <!-- Right Section -->
            <div id="right-section"
                class="w-full md:w-1/4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg space-y-6 overflow-y-auto max-h-[500px] ">
                <!-- Ads Section -->
                <div id="ads-section" class="bg-gray-100 dark:bg-gray-700 rounded-lg p-4 shadow-md">
                    <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4">Sponsored Ads</h3>
                    <!-- Dynamic Ad Items Will Appear Here -->
                </div>

                <!-- Friend Requests Section -->
                <!-- Friend Requests Section -->
                <div class="bg-gray-100 dark:bg-gray-700 rounded-lg p-4 shadow-md">
                    <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4">Friend Requests</h3>
                    <div class="space-y-4" id="friend-requests-container">
                        <!-- Friend Request 1 -->
                        <div
                            class="friend-request flex justify-between items-center bg-gray-200 dark:bg-gray-600 p-3 rounded-lg shadow-sm hover:bg-gray-300 dark:hover:bg-gray-500 transition">
                            <div class="flex items-center space-x-3 w-full">
                                <img src="https://th.bing.com/th/id/OIP._ngYF3KIPcb4GMzItOQbCQHaE9?w=281&h=187&c=7&r=0&o=5&pid=1.7"
                                    alt="Friend 1" class="w-10 h-10 rounded-full border-2 border-blue-500" />
                                <p class="text-gray-700 dark:text-gray-300 flex-grow line-clamp-2">John Doe</p>
                            </div>
                            <div class="action-buttons flex space-x-2 ml-2">
                                <button
                                    class="accept-btn bg-blue-500 hover:bg-blue-600 text-white py-1 px-3 rounded-md flex items-center transition"
                                    onclick="handleActionClick(this)">
                                    <i class="fas fa-check mr-2"></i> Accept
                                </button>
                                <button
                                    class="decline-btn bg-red-500 hover:bg-red-600 text-white py-1 px-3 rounded-md flex items-center transition"
                                    onclick="handleActionClick(this)">
                                    <i class="fas fa-times mr-2"></i> Decline
                                </button>
                            </div>
                        </div>

                        <!-- Friend Request 2 -->
                        <div
                            class="friend-request flex justify-between items-center bg-gray-200 dark:bg-gray-600 p-3 rounded-lg shadow-sm hover:bg-gray-300 dark:hover:bg-gray-500 transition">
                            <div class="flex items-center space-x-3 w-full">
                                <img src="https://th.bing.com/th/id/OIP.kKNSidGj6Qwgpb1cj1oDJAHaE7?w=281&h=187&c=7&r=0&o=5&pid=1.7"
                                    alt="Friend 2" class="w-10 h-10 rounded-full border-2 border-blue-500" />
                                <p class="text-gray-700 dark:text-gray-300 flex-grow line-clamp-2">Sarah Smith</p>
                            </div>
                            <div class="action-buttons flex space-x-2 ml-2">
                                <button
                                    class="accept-btn bg-blue-500 hover:bg-blue-600 text-white py-1 px-3 rounded-md flex items-center transition"
                                    onclick="handleActionClick(this)">
                                    <i class="fas fa-check mr-2"></i> Accept
                                </button>
                                <button
                                    class="decline-btn bg-red-500 hover:bg-red-600 text-white py-1 px-3 rounded-md flex items-center transition"
                                    onclick="handleActionClick(this)">
                                    <i class="fas fa-times mr-2"></i> Decline
                                </button>
                            </div>
                        </div>
                        <div
                            class="friend-request flex justify-between items-center bg-gray-200 dark:bg-gray-600 p-3 rounded-lg shadow-sm hover:bg-gray-300 dark:hover:bg-gray-500 transition">
                            <div class="flex items-center space-x-3 w-full">
                                <img src="https://ntvb.tmsimg.com/assets/assets/70021_v9_bc.jpg" alt="Friend 3"
                                    class="w-10 h-10 rounded-full border-2 border-blue-500" />
                                <p class="text-gray-700 dark:text-gray-300 flex-grow line-clamp-2">Dave Mathews</p>
                            </div>
                            <div class="action-buttons flex space-x-2 ml-2">
                                <button
                                    class="accept-btn bg-blue-500 hover:bg-blue-600 text-white py-1 px-3 rounded-md flex items-center transition"
                                    onclick="handleActionClick(this)">
                                    <i class="fas fa-check mr-2"></i> Accept
                                </button>
                                <button
                                    class="decline-btn bg-red-500 hover:bg-red-600 text-white py-1 px-3 rounded-md flex items-center transition"
                                    onclick="handleActionClick(this)">
                                    <i class="fas fa-times mr-2"></i> Decline
                                </button>
                            </div>
                        </div>




                        <!-- No Requests Placeholder -->
                        <div class="no-requests hidden text-center text-gray-500 dark:text-gray-300 mt-4">
                            <p>No friend requests at the moment!</p>
                        </div>
                    </div>
                </div>

                <!-- Trending Section -->
                <div class="bg-gray-100 dark:bg-gray-700 rounded-lg p-4 shadow-md">
                    <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4">Trending Topics</h3>
                    <ul class="space-y-3">
                        <li><a href="#" class="text-gray-700 dark:text-gray-300 hover:text-blue-500">#FitnessGoals</a>
                        </li>
                        <li><a href="#"
                                class="text-gray-700 dark:text-gray-300 hover:text-blue-500">#HealthyLifestyle</a></li>
                        <li><a href="#" class="text-gray-700 dark:text-gray-300 hover:text-blue-500">#GymMotivation</a>
                        </li>
                        <li><a href="#" class="text-gray-700 dark:text-gray-300 hover:text-blue-500">#Mindfulness</a>
                        </li>
                        <li><a href="#"
                                class="text-gray-700 dark:text-gray-300 hover:text-blue-500">#WeightLossJourney</a></li>
                    </ul>
                </div>

                <!-- Activity Feed Section -->
                <div class="bg-gray-100 dark:bg-gray-700 rounded-lg p-4 shadow-md">
                    <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4">Recent Activity</h3>
                    <div id="activity-feed" class="space-y-4">
                        <div
                            class="activity-item flex items-center justify-between p-3 bg-gray-200 dark:bg-gray-600 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500">
                            <div class="activity-content">
                                <p class="text-gray-700 dark:text-gray-300">You liked a post by John Doe</p>
                                <small class="text-sm text-gray-500 dark:text-gray-400">5 minutes ago</small>
                            </div>
                        </div>
                        <div
                            class="activity-item flex items-center justify-between p-3 bg-gray-200 dark:bg-gray-600 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500">
                            <div class="activity-content">
                                <p class="text-gray-700 dark:text-gray-300">You commented on Sarah's post</p>
                                <small class="text-sm text-gray-500 dark:text-gray-400">15 minutes ago</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


    </main>



    <!-- JavaScript file inclusion -->
    <script>
        // Toggle the hamburger menu
        document.getElementById('menu-btn').addEventListener('click', function () {
            this.classList.toggle('open');
            document.getElementById('mobile-menu').classList.toggle('open');
        });

        const adsData = [
            {
                image: "https://via.placeholder.com/728x90.png?text=Buy+New+Fitness+Gear+Today",
                link: "https://www.amazon.in/l/3403635031",
                text: "Buy New Fitness Gear Today!"
            },
            {
                image: "https://via.placeholder.com/728x90.png?text=Exclusive+Offer+on+Memberships",
                link: "https://www.timesprime.com/",
                text: "Exclusive Offer on Memberships!"
            }
        ];

        function renderAds() {
            const adsSection = document.getElementById("ads-section");

            if (!adsSection) {
                console.error("Ad section not found!");
                return;
            }

            adsSection.innerHTML = '';

            adsData.forEach(ad => {
                const adElement = document.createElement("div");
                adElement.classList.add("ad-item", "mb-4");

                adElement.innerHTML = `
                    <a href="${ad.link}" target="_blank" class="block text-center bg-gray-200 dark:bg-gray-600 p-3 rounded-lg shadow-md hover:bg-gray-300 dark:hover:bg-gray-500 transition">
                        <img src="${ad.image}" alt="${ad.text}" class="w-full h-auto rounded-lg mb-3" />
                        <p class="text-gray-700 dark:text-gray-300">${ad.text}</p>
                    </a>
                `;

                adsSection.appendChild(adElement);
            });
        }

        window.onload = function () {
            renderAds();
        };

        function handleActionClick(button) {
            const requestDiv = button.closest('.friend-request');
            const friendRequestsContainer = document.getElementById('friend-requests-container');

            requestDiv.classList.add('fade-out');

            requestDiv.addEventListener('animationend', () => {
                requestDiv.remove();

                const remainingRequests = friendRequestsContainer.querySelectorAll('.friend-request');
                if (remainingRequests.length === 0) {
                    const noRequestsMessage = document.querySelector('.no-requests');
                    noRequestsMessage.classList.remove('hidden');
                }
            });
        }

        // Accept Friend Request
        document.querySelectorAll('.accept-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const friendRequest = e.target.closest('.friend-request');
                friendRequest.classList.add('bg-green-100');
                friendRequest.querySelector('.accept-btn').disabled = true;
                friendRequest.querySelector('.decline-btn').disabled = true;
            });
        });

        document.querySelectorAll('.decline-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const friendRequest = e.target.closest('.friend-request');
                friendRequest.classList.add('bg-green-100');
                friendRequest.querySelector('.accept-btn').disabled = true;
                friendRequest.querySelector('.decline-btn').disabled = true;
            });
        });

        const topicToSubreddit = {
            technology: ['technology', 'gadgets', 'technews'],
            news: ['worldnews', 'news', 'uknews'],
            fitness: ['fitness', 'nutrition', 'yoga', 'bodybuilding', 'crossfit', 'running'],
            sports: ['sports', 'soccer', 'basketball'],
            movies: ['movies', 'film', 'moviecritic'],
        };

        let isLoading = false;
        let posts = [];
        let currentTopic = 'technology'; // To track the current active topic
        let after = '';

        function createPost(post) {
            const postElement = document.createElement('div');
            postElement.classList.add('feed-item', 'bg-white', 'dark:bg-gray-800', 'p-4', 'rounded-lg', 'shadow-md', 'hover:shadow-lg', 'transition-all');
            postElement.dataset.postId = post.id;

            postElement.innerHTML = `
        <div class="flex items-center space-x-4">
            <div class="profile-pic"></div>
            <div class="post-author">
                <span class="font-semibold text-gray-900 dark:text-white">${post.author}</span>
                <p class="text-sm text-gray-500 dark:text-gray-400">Posted recently</p>
            </div>
        </div>
        <p class="mt-4 text-gray-800 dark:text-gray-200">${post.title}</p>
        ${post.thumbnail ? `
            <div class="image-container relative">
                <img src="${post.thumbnail}" alt="Post Image" class="mt-4 w-full h-auto rounded-lg post-image cursor-pointer" />
                <div class="overlay absolute top-0 left-0 w-full h-full flex items-center justify-center bg-black bg-opacity-50 text-white text-xl font-bold opacity-0 hover:opacity-100 transition-opacity cursor-pointer" data-url="${post.url}">
                    Click to View
                </div>
            </div>` : ''}
        <div class="mt-4 flex justify-between text-gray-600 dark:text-gray-400">
            <button class="like-btn">
                <span class="like-icon">&#9829;</span> Like
            </button>
            <button class="comment-btn">Comment</button>
            <button class="share-btn">Share</button>
        </div>
        <div class="comment-box hidden mt-4">
            <textarea id="comment-text-${post.id}" class="w-full p-2 border border-gray-300 rounded-lg" placeholder="Write your comment..."></textarea>
            <button class="submit-comment-btn bg-blue-500 text-white mt-2 p-2 rounded">Submit Comment</button>
        </div>`;

            const likeButton = postElement.querySelector('.like-btn');
            const likeIcon = likeButton.querySelector('.like-icon');

            likeButton.addEventListener('click', () => toggleLike(likeButton, likeIcon, post.id));

            const submitCommentButton = postElement.querySelector('.submit-comment-btn');
            submitCommentButton.addEventListener('click', () => {
                const commentText = postElement.querySelector(`#comment-text-${post.id}`).value;
                if (commentText.trim()) {
                    alert(`Comment posted: ${commentText}`);
                    postElement.querySelector(`#comment-text-${post.id}`).value = ''; // Clear comment box
                }
            });

            const shareButton = postElement.querySelector('.share-btn');
            shareButton.addEventListener('click', () => {
                const postUrl = post.url;
                navigator.share({
                    title: post.title,
                    url: postUrl
                }).catch(err => {
                    console.error('Error sharing post:', err);
                });
            });

            const commentButton = postElement.querySelector('.comment-btn');
            commentButton.addEventListener('click', () => {
                const commentBox = postElement.querySelector('.comment-box');
                commentBox.classList.toggle('hidden');
            });

            const postImage = postElement.querySelector('.post-image');
            const overlay = postElement.querySelector('.overlay');

            postImage.addEventListener('click', () => {
                window.open(post.url, '_blank'); // Opens the post URL in a new tab
            });

            overlay.addEventListener('click', (event) => {
                event.stopPropagation(); // Prevent the image click handler from firing
                window.open(post.url, '_blank'); // Opens the post URL in a new tab
            });

            return postElement;
        }

        async function fetchRedditPosts(subreddit) {
            const url = `https://www.reddit.com/r/${subreddit}/new.json?after=${after}`;
            const response = await fetch(url);

            if (!response.ok) {
                throw new Error(`Failed to fetch data from subreddit: ${subreddit}`);
            }

            const data = await response.json();
            after = data.data.after;

            return data.data.children
                .map(post => {
                    if (post.data.is_self || post.data.thumbnail === 'self') {
                        return null;
                    }

                    let imageUrl = null;

                    if (post.data.preview?.images?.[0]?.source?.url) {
                        imageUrl = post.data.preview.images[0].source.url.replace(/&amp;/g, '&');
                    } else if (post.data.url_overridden_by_dest) {
                        const urlLower = post.data.url_overridden_by_dest.toLowerCase();
                        if (urlLower.match(/\.(jpg|jpeg|png|gif)(\?.*)?$/i) ||
                            urlLower.includes('imgur.com') ||
                            urlLower.includes('i.redd.it')) {
                            imageUrl = post.data.url_overridden_by_dest;
                        }
                    } else if (post.data.url) {
                        const urlLower = post.data.url.toLowerCase();
                        if (urlLower.match(/\.(jpg|jpeg|png|gif)(\?.*)?$/i) ||
                            urlLower.includes('imgur.com') ||
                            urlLower.includes('i.redd.it')) {
                            imageUrl = post.data.url;
                        }
                    }

                    if (!imageUrl || !imageUrl.startsWith('http')) {
                        return null;
                    }

                    return {
                        title: post.data.title,
                        url: post.data.url,
                        thumbnail: imageUrl,
                        id: post.data.id,
                        author: post.data.author,
                    };
                })
                .filter(post => post !== null);
        }

        function toggleLike(likeButton, likeIcon, postId) {
            const isLiked = likeIcon.classList.contains('text-red-500');

            if (isLiked) {
                likeIcon.classList.remove('text-red-500');
                likeIcon.innerHTML = '&#9829;'; // Heart outline
                likeButton.innerHTML = `<span class="like-icon">&#9829;</span> Like`;
            } else {
                likeIcon.classList.add('text-red-500');
                likeIcon.innerHTML = '&#10084;&#65039;'; // Filled heart
                likeButton.innerHTML = `<span class="like-icon text-red-500">&#10084;&#65039;</span> Unlike`;
            }

            const post = posts.find(p => p.id === postId);
            if (post) {
                post.isLiked = !isLiked;
            }
        }

        async function loadPostsByTopic(topic, isInfiniteScroll = false) {
            const subreddits = topicToSubreddit[topic];
            if (!subreddits || subreddits.length === 0) return;

            const postFeed = document.getElementById('post-feed');
            const loadingIndicator = document.getElementById('loading-indicator');

            if (isLoading) return;
            isLoading = true;

            loadingIndicator?.classList.remove('hidden');

            if (!isInfiniteScroll) {
                postFeed.innerHTML = '';
                posts = [];
                after = '';
            }

            try {
                let allPosts = [];
                let attempts = 0;
                const maxAttempts = 3;
                const seenUrls = new Set(posts.map(p => p.url));

                while (allPosts.length < 10 && attempts < maxAttempts) {
                    for (let subreddit of subreddits) {
                        const fetchedPosts = await fetchRedditPosts(subreddit);
                        const uniquePosts = fetchedPosts.filter(post => !seenUrls.has(post.url));
                        uniquePosts.forEach(post => seenUrls.add(post.url));
                        allPosts = [...allPosts, ...uniquePosts];
                    }
                    attempts++;
                }

                const shuffledPosts = allPosts.sort(() => Math.random() - 0.5);

                if (shuffledPosts.length > 0) {
                    shuffledPosts.forEach(post => {
                        const postElement = createPost(post);
                        postFeed.appendChild(postElement);
                        posts.push(post);
                    });
                } else if (!isInfiniteScroll) {
                    const noImageMessage = document.createElement('p');
                    noImageMessage.textContent = 'No posts with images available at the moment.';
                    postFeed.appendChild(noImageMessage);
                }
            } catch (error) {
                console.error("Error fetching posts:", error);
            } finally {
                isLoading = false;
                loadingIndicator?.classList.add('hidden');
            }
        }

        window.addEventListener('scroll', function () {
            const scrollableHeight = document.documentElement.scrollHeight - window.innerHeight;
            const scrollPosition = window.scrollY;

            if (scrollPosition >= scrollableHeight - 10) {
                loadPostsByTopic(currentTopic, true);
            }
        });

        // Initialize with a random topic
        loadPostsByTopic(currentTopic);

    </script>
    <script src="script.js"></script>

</body>

</html>